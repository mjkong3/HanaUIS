<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="ateam.mapper.BoardMapper">

	<!-- 공지사항 페이징 처리 -->
	<select id="getBoardCount" parameterType="map" resultType="int">
	    SELECT COUNT(*) 
	    FROM BOARD 
	   	WHERE 1=1
	    <if test="searchKeyword != 'ALL' and searchKeyword !='' and searchKeyword != NULL">
			AND TITLE LIKE CONCAT('%', #{searchKeyword}, '%')
		</if>
	</select>
	
	<select id="boardList" parameterType="map" resultType="java.util.Map">
	   SELECT BOARD_CODE, TITLE, CONTENT, REG_DTM 
	   FROM BOARD 
	   WHERE 1=1
	   <if test="searchKeyword != 'ALL' and searchKeyword !='' and searchKeyword != NULL">
			AND TITLE LIKE CONCAT('%', #{searchKeyword}, '%')
	   </if>
	   ORDER BY BOARD_CODE DESC
	   LIMIT #{pageSize} OFFSET #{offset};
	</select>
	
	
	<!-- 공지사항 상세 -->
	<select id="selectBoard" parameterType="Integer" resultType="ateam.dto.BoardDTO">
	   SELECT BOARD_CODE,  
	          TITLE, 
	          IMAGE,
	          CONTENT, 
	          REG_DTM
	   FROM BOARD 
	   WHERE BOARD_CODE = #{id}
	
	</select>
	
	<!-- 공지사항 파일 -->
	<select id="selectFile" parameterType="int" resultType="ateam.dto.FileDTO">
	   SELECT FILE_NAME
	   FROM FILE
	   WHERE BOARD_CODE = #{boardCode}
	</select>

</mapper>