<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ateam.mapper.AdClassInfoMapper">

	<!-- list grd에 목록 생성 -->
	<select id="selectAdClsList" parameterType="java.util.Map" resultType="java.util.Map">
	
		SELECT CLASS_CODE, CLASS_NAME, CLASS_START, CLASS_END, SEMESTER, CLASS_GRADE, DEPARTMENT_CODE, CLASSROOM_ID,
		PROFESSOR_ID, CLASS_TYPE, ADMIN_CODE, REGDATE, 0 AS 'CHECK'
		FROM CLASS
		WHERE 1=1
		
		<if test="SEARCH_WORD != null">
			<if test="SEARCH_TYPE == 'ALL'"> 
				AND (CLASS_CODE LIKE CONCAT('%', #{SEARCH_WORD}, '%')
				OR CLASS_NAME LIKE CONCAT('%', #{SEARCH_WORD}, '%')
				OR CLASS_START LIKE CONCAT('%', #{SEARCH_WORD}, '%')
				OR CLASS_END LIKE CONCAT('%', #{SEARCH_WORD}, '%')
				OR SEMESTER LIKE CONCAT('%', #{SEARCH_WORD}, '%')
				OR CLASS_GRADE LIKE CONCAT('%', #{SEARCH_WORD}, '%')
				OR CLASSROOM_ID LIKE CONCAT('%', #{SEARCH_WORD}, '%')
				OR PROFESSOR_ID LIKE CONCAT('%', #{SEARCH_WORD}, '%')
				OR CLASS_TYPE LIKE CONCAT('%', #{SEARCH_WORD}, '%')
				OR ADMIN_CODE LIKE CONCAT('%', #{SEARCH_WORD}, '%')
				OR REGDATE LIKE CONCAT('%', #{SEARCH_WORD}, '%'))				
			</if>
			<if test="SEARCH_TYPE == 'CLASS_CODE'">
				AND CLASS_CODE LIKE CONCAT('%', #{SEARCH_WORD}, '%')
			</if>
			<if test="SEARCH_TYPE == 'CLASS_NAME'">
				AND CLASS_NAME LIKE CONCAT('%', #{SEARCH_WORD}, '%')
			</if>
			<if test="SEARCH_TYPE == 'CLASS_START'">
				AND CLASS_START LIKE CONCAT('%', #{SEARCH_WORD}, '%')
			</if>
			<if test="SEARCH_TYPE == 'CLASS_END'">
				AND CLASS_END LIKE CONCAT('%', #{SEARCH_WORD}, '%')
			</if>
			<if test="SEARCH_TYPE == 'SEMESTER'">
				AND SEMESTER LIKE CONCAT('%', #{SEARCH_WORD}, '%')
			</if>
			<if test="SEARCH_TYPE == 'CLASS_GRADE'">
				AND CLASS_GRADE LIKE CONCAT('%', #{SEARCH_WORD}, '%')
			</if>
			<if test="SEARCH_TYPE == 'CLASSROOM_ID'">
				AND CLASSROOM_ID LIKE CONCAT('%', #{SEARCH_WORD}, '%')
			</if>
			<if test="SEARCH_TYPE == 'PROFESSOR_ID'">
				AND PROFESSOR_ID LIKE CONCAT('%', #{SEARCH_WORD}, '%')
			</if>
			<if test="SEARCH_TYPE == 'CLASS_TYPE'">
				AND CLASS_TYPE LIKE CONCAT('%', #{SEARCH_WORD}, '%')
			</if>
			<if test="SEARCH_TYPE == 'ADMIN_CODE'">
				AND ADMIN_CODE LIKE CONCAT('%', #{SEARCH_WORD}, '%')
			</if>
			<if test="SEARCH_TYPE == 'REGDATE'">
				AND REGDATE LIKE CONCAT('%', #{SEARCH_WORD}, '%')
			</if>			
		</if>
		<if test="DEPARTMENT_CODE != 0">
			AND DEPARTMENT_CODE = #{DEPARTMENT_CODE}
		</if>
	</select>
	
</mapper>